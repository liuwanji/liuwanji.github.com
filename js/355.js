"use strict";(self.webpackChunkveeka_web=self.webpackChunkveeka_web||[]).push([[355],{21355:function(e,n,a){a.r(n);var t=a(64120),r=a(91192),c=a(25554),o=a.n(c),i=(a(40946),a(12256),a(25323),a(26750),a(37655),a(39021),a(83211),a(59301)),l=a(5894),s=a(6897),u=a(34453),d=a(54479),p=a(23060);n.default=(0,u.$j)((function(e){return{config:e.app.config}}),(function(e){return{actions:{jumpRedirectPage:e.app.jumpRedirectPage}}}))((function(e){var n,a,c=(0,l.uV)("/account/lineToken",{baseURL:null===(n=e.config)||void 0===n?void 0:n.api_api}),u=(0,r.Z)(c,2),v=(u[0],u[1]),f=(0,l.uV)("/account/lineLogin",{baseURL:null===(a=e.config)||void 0===a?void 0:a.api_api}),m=(0,r.Z)(f,2),g=(m[0],m[1]);function k(n){var a;e.actions.jumpRedirectPage((null===(a=e.config)||void 0===a?void 0:a.host_official)+"/home")}return(0,i.useEffect)((0,t.Z)(o().mark((function e(){var n,a,t,r,c,i,l,u,f,m,b,_;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new URLSearchParams(window.location.search),r=t.get("code")){e.next=4;break}return e.abrupt("return",s.FN.error(d.ZP.common.service_exception));case 4:return e.prev=4,e.next=7,v({code:r});case 7:c=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),l=e.t0;case 13:if(null===(n=c)||void 0===n||null===(a=n.data)||void 0===a||!a.access_token){e.next=26;break}return e.prev=14,e.next=17,g({type:"login",platform:"web"},{params:{t:c.data.access_token}});case 17:i=e.sent,e.next=23;break;case 20:e.prev=20,e.t1=e.catch(14),l=e.t1;case 23:null!==(u=i)&&void 0!==u&&null!==(f=u.data)&&void 0!==f&&f.token?((0,p.d8)("userToken",i.data.token),k(!0)):l=i||l,e.next=27;break;case 26:l=c||l;case 27:l&&s.FN.error((null===(m=l)||void 0===m?void 0:m.error_message)||(null===(b=l)||void 0===b||null===(_=b.error)||void 0===_?void 0:_.message)||d.ZP.common.service_exception,{afterClose:function(){return k(!1)}});case 28:case"end":return e.stop()}}),e,null,[[4,10],[14,20]])}))),[]),i.createElement("article",{className:"page-line"},i.createElement("div",{className:"loading"},i.createElement("span",null,"•"),i.createElement("span",null,"•"),i.createElement("span",null,"•")),i.createElement("div",{className:"pl-logging"},d.ZP.common.signed_in))}))}}]);